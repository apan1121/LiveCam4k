(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{116:function(t,e,n){"use strict";function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a}));!function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}}({},n(19).a);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c="Page/Travel",a={state:function(){return{}},mutations:{},actions:{},getters:{},namespaced:!0};!function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}}({module_name:c},a)},124:function(t,e,n){"use strict";(function(t){var i=n(3),o=n(2);n(116);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a={components:{},filters:{},props:{lat:{type:Number,default:0},lng:{type:Number,default:0},amount:{type:Number,default:0},sameCountryLimit:{type:Number,default:0}},data:function(){return{calcing:!1,last_point:!1,chooseLiveCamKeys:[],sameCountryCount:{}}},computed:s({},Object(o.c)(["LiveCamList","PageSetting_scrollTop"])),watch:{lat:{immediate:!0,handler:function(){this.calc()}},lng:{immediate:!0,handler:function(){this.calc()}},chooseLiveCamKeys:{deep:!0,immediate:!0,handler:function(){this.$emit("update:live-cam-keys",this.chooseLiveCamKeys),t(this.$refs.list).scrollTop(t(this.$refs.list)[0].scrollHeight+1e3)}}},beforeCreate:function(){},created:function(){},mounted:function(){var e=t(window).height(),n=t(this.$el).offset().top;(this.PageSetting_scrollTop>n||this.PageSetting_scrollTop+e<n)&&t("html, body").stop(!0,!0).animate({scrollTop:n},500,"swing",(function(){}))},updated:function(){},destroyed:function(){},methods:s(s(s({},Object(o.b)({})),Object(o.d)({})),{},{calc:function(){var t=this;t.last_point=!1,t.chooseLiveCamKeys=[],t.sameCountryCount={},clearTimeout(this.calcTimer),clearTimeout(t.calcLiveCamTimer),t.calcTimer=setTimeout((function(){t.last_point={lat:t.lat,lng:t.lng},t.calcLiveCam()}),100)},calcLiveCam:function(){var t=this;if(clearTimeout(t.calcLiveCamTimer),t.calcing=!0,!1!==t.last_point){var e;if(e=t.getNearestLivCam()){t.chooseLiveCamKeys.push(e);var n=t.LiveCamList[e].local,i=JSON.parse(JSON.stringify(t.sameCountryCount));i[n]||(i[n]=0),i[n]+=1,t.sameCountryCount=i}t.chooseLiveCamKeys.length<t.amount&&e?t.calcLiveCamTimer=setTimeout((function(){t.calcLiveCam()}),20):t.calcing=!1}else t.calcing=!1},getNearestLivCam:function(){var t=this,e=Object.values(JSON.parse(JSON.stringify(t.LiveCamList))),n=!1;return e.length>0&&(n=(e=(e=(e=e.filter((function(e){var n=!0,i=e.local;return"1"!==e.embed&&(n=!1),e.video.live||(n=!1),t.chooseLiveCamKeys.includes(e.key)&&(n=!1),t.sameCountryCount[i]>=t.sameCountryLimit&&(n=!1),n}))).map((function(e){return e.distance=i.d.calVincentyCircleDistance(e.gps.lat,e.gps.lng,t.lat,t.lng),e}))).sort((function(t,e){return t.distance>e.distance?1:t.distance===e.distance?0:-1})))[0].key),n}})}}).call(this,n(25))},579:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this.$createElement,e=this._self._c||t;return this.cssLoaded?e("div",{attrs:{id:"travel"}},[!1===this.start_point?[e("choose-start-point-box",{on:{sumbit:this.sumbit}})]:this._e()],2):this._e()};i._withStripped=!0;var o=n(2),r=n(65),s=n(3),c=n(116),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"choose-start-point-box"},[n("h5",{staticClass:"choose-start-point-header"},[t._v("\n        環遊世界起始地點\n    ")]),t._v(" "),t.input_point?n("div",{staticClass:"choose-start-point-input",class:{process:t.runRandom_flag}},[t._v("\n        "+t._s(t.input_point.lat.toFixed(5))+", "+t._s(t.input_point.lng.toFixed(5))+"\n        "),n("div",{staticClass:"choose-start-point-tools"},[n("div",{staticClass:"choose-start-point-input-button",attrs:{rel:"random","data-rotate":t.dice_icon_rotate,title:t.$t("TravelPage.Dice.Random")},on:{click:t.runRandom}},[n("i",{class:t.dice_icon[t.dice_icon_choose]})]),t._v(" "),t.CurrentPosition&&"success"===t.CurrentPosition.status?n("div",{staticClass:"choose-start-point-input-button",attrs:{rel:"current",title:t.$t("TravelPage.Dice.CurrentPoint")},on:{click:t.runCurrentPosition}},[n("i",{staticClass:"fas fa-map-marker-alt"})]):t._e()])]):t._e(),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6 mb-5"},[n("div",{staticClass:"choose-start-point-map"},[t.input_point?n("static-map-box",{attrs:{lat:t.input_point.lat,lng:t.input_point.lng,zoom:t.mapZoom,"zoom-control":!0,dragging:!1,"move-mark-wait":50}}):t._e()],1)]),t._v(" "),n("div",{staticClass:"col-12 col-md-6 mb-5"},[t.calc_input_point&&t.calc_input_point.lat&&t.calc_input_point.lng?[n("calc-live-cam-list",{class:{"auto-height":t.autoHeight},attrs:{lat:t.calc_input_point.lat,lng:t.calc_input_point.lng,amount:t.liveCamKeyCount,"same-country-limit":5,"live-cam-keys":t.chooseLiveCamKeys},on:{"update:liveCamKeys":function(e){t.chooseLiveCamKeys=e},"update:live-cam-keys":function(e){t.chooseLiveCamKeys=e}}})]:[n("div",{staticClass:"choose-live-cam-box"},[n("div",{staticClass:"choose-live-cam-empty"},[n("loading-box")],1)])]],2)]),t._v(" "),!t.is_process&&t.calc_input_point&&t.chooseLiveCamKeys.length>0?n("div",{staticClass:"choose-start-point-start-button"},[n("button",{staticClass:"btn btn-primary btn-block",on:{click:t.sumbit}},[t._v("\n            開始旅行\n        ")])]):t._e()])};a._withStripped=!0;var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"choose-live-cam-box"},[n("div",{ref:"list",staticClass:"choose-live-cam-list"},[t._l(t.chooseLiveCamKeys,(function(e){return[n("div",{key:e,staticClass:"choose-live-cam-wrapper"},[n("div",{staticClass:"choose-live-cam-item",attrs:{rel:"title"}},[t._v("\n                    "+t._s(t.LiveCamList[e].video.title)+"\n                ")]),t._v(" "),n("div",{staticClass:"choose-live-cam-item",attrs:{rel:"local"}},[t._v("\n                    "+t._s(t.LiveCamList[e].local)+"\n                ")])])]})),t._v(" "),t.calcing?n("div",{staticClass:"calculating"},[t._v("\n            計算中\n        ")]):t._e()],2)])};u._withStripped=!0;var l=n(124).a,p=n(9),m=Object(p.a)(l,u,[],!1,null,"6059d40e",null);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}m.options.__file="components/TravelPage/components/CalcLiveCamList.vue";var v={components:{LoadingBox:function(){return n.e(12).then(n.bind(null,581))},StaticMapBox:function(){return Promise.all([n.e(1),n.e(0)]).then(n.bind(null,573))},CalcLiveCamList:m.exports},filters:{},props:{},data:function(){return{input_point:!1,calc_input_point:!1,chooseLiveCamKeys:[],dice_icon:["fas fa-dice-one","fas fa-dice-two","fas fa-dice-three","fas fa-dice-four","fas fa-dice-five","fas fa-dice-six"],dice_icon_choose:0,dice_icon_rotate:0,runRandom_flag:!1,mapZoom:10,is_process:!1,liveCamKeyCount:50}},computed:d(d({},Object(o.c)(["CurrentPosition","PageSetting_width"])),{},{autoHeight:function(){return this.PageSetting_width<=767}}),watch:{CurrentPosition:{immediate:!0,deep:!0,handler:function(){this.calc_input_point=!1,this.calc_input_point_focus=!1,console.log(this.CurrentPosition.status),"success"===this.CurrentPosition.status?this.input_point=d({},this.CurrentPosition):"ask"===this.CurrentPosition.status||this.runRandom()}},input_point:{immediate:!0,deep:!0,handler:function(t){var e=this;e.calc_input_point=!1,clearTimeout(e.input_point_timer),t&&(e.input_point_timer=setTimeout((function(){e.calc_input_point=d({},e.input_point)}),1e3))}},calc_input_point:function(){this.isProcess()},chooseLiveCamKeys:function(){this.isProcess()}},beforeCreate:function(){},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},methods:d(d(d({},Object(o.b)({})),Object(o.d)({})),{},{isProcess:function(){var t=this;this.is_process=!0,clearTimeout(this.isProcessTimer),this.isProcessTimer=setTimeout((function(){t.is_process=!1}),1500)},runRandom:function(){var t=this;clearInterval(t.runRandomDice),clearTimeout(t.stopRunRandom),clearTimeout(t.runRandomTimer),t.runRandom_flag=!0,t.mapZoom=1,t.calc_input_point=!1,t.runRandomTimer=setTimeout((function(){t.runRandomDice=setInterval((function(){t.setRandomDice(),t.setRandomInputPoint()}),100),t.stopRunRandom=setTimeout((function(){t.runRandom_flag=!1,t.mapZoom=5,clearInterval(t.runRandomDice)}),3e3)}),500)},runCurrentPosition:function(){this.input_point=d({},this.CurrentPosition)},setRandomDice:function(){this.dice_icon_choose=s.d.getRandomInRange(0,this.dice_icon.length-1),this.dice_icon_rotate=s.d.getRandomInRange(0,18)},setRandomInputPoint:function(){this.input_point={lat:s.d.getRandomInRange(-70,70,3),lng:s.d.getRandomInRange(-180,180,3)}},sumbit:function(){var t={start:this.calc_input_point,liveCamKeys:this.chooseLiveCamKeys};this.$emit("submit",t)}})},b=Object(p.a)(v,a,[],!1,null,"c2fcf630",null);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}b.options.__file="components/TravelPage/components/ChooseStartPointBox.vue";var O={components:{ChooseStartPointBox:b.exports},filters:{},mixins:[r.a],props:{},data:function(){return{cssLoaded:!1,start_point:!1}},computed:g({},Object(o.c)([])),watch:{},beforeCreate:function(){var t=c.a.split("/");this.$store.hasModule([t[0]])||this.$store.registerModule([t[0]],{state:{},mutations:{},getter:{},action:{},namespaced:!0}),this.$store.hasModule(t)||this.$store.registerModule(t,c.b)},created:function(){var t=this;s.b.register([{rel:"stylesheet",type:"text/css",href:"/dist/css/page/travel-page.css",onload:function(){t.cssLoaded=!0}}])},mounted:function(){this.setPageTitle(this.$t("Menu.Travel"))},updated:function(){},destroyed:function(){},methods:g(g(g({},Object(o.b)({})),Object(o.d)({})),{},{sumbit:function(t){console.log(t)}})},C=Object(p.a)(O,i,[],!1,null,"338bb198",null);C.options.__file="components/TravelPage/main.vue";e.default=C.exports}}]);