(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{570:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.canShare?r("div",{staticClass:"share-url-box"},[r("div",{staticClass:"share-url-wrapper"},[r("div",{staticClass:"share-url-content"},[r("div",{staticClass:"share-url-title"},[e._v("\n                分享至\n            ")]),e._v(" "),e._l(e.shareBtnList,(function(t){return[r("button",{key:t.key,staticClass:"btn btn-block mb-3",class:"btn-"+t.color,on:{click:function(r){return e.shareTo(t.key)}}},[r("i",{class:t.icon}),e._v("\n                    "+e._s(t.title)+"\n                ")])]})),e._v(" "),r("div",{staticClass:"share-url-box-footer"},[r("div",{staticClass:"share-url-box-footer-wrapper"},[r("div",{staticClass:"share-url-box-footer-item",attrs:{rel:"input"}},[r("input",{ref:"shareUrlBoxInput",attrs:{id:"share-url-box-input",type:"text",readonly:""},domProps:{value:e.ShareUrlInfo.url}})]),e._v(" "),r("div",{staticClass:"share-url-box-footer-item",attrs:{rel:"copy-url-btn"}},[""===e.clipboardJSFlag?[r("button",{staticClass:"btn btn-sm btn-outline-primary share-url-clipborad-btn",attrs:{"data-clipboard-target":"#share-url-box-input"}},[e._v("\n                                複製連結\n                            ")])]:e._e(),e._v(" "),"success"===e.clipboardJSFlag?[r("button",{staticClass:"btn btn-sm btn-success"},[e._v("\n                                複製成功\n                            ")])]:e._e(),e._v(" "),"error"===e.clipboardJSFlag?[r("button",{staticClass:"btn btn-sm btn-warning"},[e._v("\n                                複製失敗\n                            ")])]:e._e()],2)])]),e._v(" "),r("div",{staticClass:"share-url-close",on:{click:e.closeSharBox}},[r("i",{staticClass:"fas fa-times"})])],2)])]):e._e()};n._withStripped=!0;var o=r(339),i=r.n(o),s=r(3),a=r(2);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}}({},r(19).a);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}}({module_name:"Common/Demo"},{state:function(){return{}},mutations:{},actions:{},getters:{},namespaced:!0});function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={components:{},filters:{},props:{},data:function(){return{canShare:!1,isMobile:!1,clipboardJSFlag:"",shareBtnList:[{key:"facebook",title:"Facebook",color:"primary",icon:"fab fa-facebook"},{key:"messenger",title:"Messenger",color:"info",icon:"fab fa-facebook-messenger"},{key:"line",title:"LINE",color:"success",icon:"fab fa-line"}]}},computed:p({},Object(a.c)(["ShareUrlInfo","PageSetting_device"])),watch:{PageSetting:{immediate:!0,deep:!0,handler:function(e){this.isMobile=["iOS","Android"].includes(this.PageSetting_device)}},clipboardJSFlag:function(e,t){var r=this;e&&setTimeout((function(){r.clipboardJSFlag=""}),500)}},beforeCreate:function(){},created:function(){var e=this;s.b.register([{rel:"stylesheet",type:"text/css",href:"/dist/css/page/components/share-url-box.css",onload:function(){e.cssLoaded=!0}}])},mounted:function(){this.canShare=!1,this.initClipboard(),this.ShareUrlTriggerAct()},updated:function(){},destroyed:function(){this.setShareUrlInfo(!1)},methods:p(p(p({},Object(a.b)({})),Object(a.d)({setShareUrlInfo:"setShareUrlInfo"})),{},{initClipboard:function(){var e=this,t=this.ShareUrlInfo,r=(t.title,t.url),n=new i.a(".share-url-box .share-url-clipborad-btn",{text:function(e){return r}});n.on("success",(function(t){console.log("複製成功"),e.clipboardJSFlag="success",t.clearSelection()})),n.on("error",(function(t){console.log("複製失敗",t),e.clipboardJSFlag="error"}))},ShareUrlTriggerAct:function(){var e=this,t=this;clearTimeout(t.shareUrlTriggerTimer),t.shareUrlTriggerTimer=setTimeout((function(){var r=e.ShareUrlInfo,n={title:r.title,url:r.url};window.navigator&&window.navigator.share?window.navigator.share(n).then((function(e){t.closeSharBox()})).catch((function(e){t.closeSharBox()})):e.canShare=!0}),50)},shareTo:function(e){switch(e){case"facebook":this.shareToFacebook();break;case"messenger":this.shareToMessenger();break;case"line":this.shareToLine()}},shareToFacebook:function(){var e=this.ShareUrlInfo,t=(e.title,e.url);window.FB.ui({method:"share",href:t,display:"popup"},(function(e){e&&!e.error_message?console.log("發送完成"):console.log("發送失敗")}))},shareToMessenger:function(){var e=this.ShareUrlInfo,t=(e.title,e.url),r=!1;if(this.isMobile)try{window.location.href="fb-messenger://share?link=".concat(encodeURIComponent(t)),r=!0}catch(e){r=!1}r||window.FB.ui({method:"send",link:t,display:"popup"},(function(e){e&&!e.error_message?console.log("發送完成"):console.log("發送失敗")}))},shareToLine:function(){var e=this.ShareUrlInfo,t=(e.title,e.url);if(this.isMobile){var r="http://line.me/R/msg/text/?".concat(encodeURIComponent(t));window.open(r)}else{var n="https://timeline.line.me/social-plugin/share?url=".concat(encodeURIComponent(t));window.open(n,"shareLine","width=600,height=600")}},closeSharBox:function(){this.setShareUrlInfo(!1)}})},g=r(9),m=Object(g.a)(d,n,[],!1,null,"fd5a70f0",null);m.options.__file="components/ShareUrlBox/main.vue";t.default=m.exports}}]);